{"paragraphs":[{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520593350734_-1875581969","id":"20180309-110230_579505428","dateCreated":"2018-03-09T11:02:30+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:1890","text":"sc.version","dateUpdated":"2018-03-09T11:02:34+0000","dateFinished":"2018-03-09T11:02:59+0000","dateStarted":"2018-03-09T11:02:34+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res0: String = 2.2.0\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520593329909_341879184","id":"20180309-110209_275230743","dateCreated":"2018-03-09T11:02:09+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:1678","text":"\nimport org.apache.spark.sql.types.StructType\nimport org.apache.spark.sql.types.StringType\nimport org.apache.spark.sql.types.DoubleType\nimport org.apache.spark.sql.types.TimestampType\n","dateUpdated":"2018-03-09T12:01:01+0000","dateFinished":"2018-03-09T12:01:02+0000","dateStarted":"2018-03-09T12:01:01+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.sql.types.StructType\nimport org.apache.spark.sql.types.StringType\nimport org.apache.spark.sql.types.DoubleType\nimport org.apache.spark.sql.types.TimestampType\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520593340634_545258111","id":"20180309-110220_814045424","dateCreated":"2018-03-09T11:02:20+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:1834","text":"val schema = new StructType() \n  .add(\"value\",  DoubleType) \n  .add(\"timestamp\", TimestampType) \n  .add(\"topic\", StringType) \n","dateUpdated":"2018-03-09T12:36:36+0000","dateFinished":"2018-03-09T12:01:04+0000","dateStarted":"2018-03-09T12:01:04+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"schema: org.apache.spark.sql.types.StructType = StructType(StructField(value,StructType(StructField(value,DoubleType,true)),true), StructField(timestamp,TimestampType,true), StructField(topic,StringType,true))\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520593404866_-899181205","id":"20180309-110324_34580669","dateCreated":"2018-03-09T11:03:24+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:1996","text":"val rawDf = spark\n  .readStream\n  .format(\"kafka\")\n  .option(\"kafka.bootstrap.servers\", \"broker-1:9092\")\n  .option(\"subscribe\", \"all-stream\")\n  .load()","dateUpdated":"2018-03-09T12:01:06+0000","dateFinished":"2018-03-09T12:01:06+0000","dateStarted":"2018-03-09T12:01:06+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"rawDf: org.apache.spark.sql.DataFrame = [key: binary, value: binary ... 5 more fields]\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520593428674_-1666339864","id":"20180309-110348_731796899","dateCreated":"2018-03-09T11:03:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2083","text":"val jsonDf = rawDf.select($\"value\" cast \"string\" as \"json\")\n            .select(from_json($\"json\", schema) as \"data\")\n            .select(\"data.*\")","dateUpdated":"2018-03-09T12:01:12+0000","dateFinished":"2018-03-09T12:01:12+0000","dateStarted":"2018-03-09T12:01:12+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"jsonDf: org.apache.spark.sql.DataFrame = [value: struct<value: double>, timestamp: timestamp ... 1 more field]\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520595415917_-578267806","id":"20180309-113655_1357828729","dateCreated":"2018-03-09T11:36:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3760","text":"jsonDf.printSchema","dateUpdated":"2018-03-09T12:01:15+0000","dateFinished":"2018-03-09T12:01:15+0000","dateStarted":"2018-03-09T12:01:15+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"root\n |-- value: struct (nullable = true)\n |    |-- value: double (nullable = true)\n |-- timestamp: timestamp (nullable = true)\n |-- topic: string (nullable = true)\n\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520593823005_-1308961210","id":"20180309-111023_1731507247","dateCreated":"2018-03-09T11:10:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2748","text":"val jsonFilteredDf = jsonDf.where(\"topic ='V.0.3.7.0.5'\")","dateUpdated":"2018-03-09T11:37:08+0000","dateFinished":"2018-03-09T11:37:08+0000","dateStarted":"2018-03-09T11:37:08+0000","title":"filter on topic","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"jsonFilteredDf: org.apache.spark.sql.Dataset[org.apache.spark.sql.Row] = [value: struct<value: string>, timestamp: timestamp ... 1 more field]\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520594219330_1745744198","id":"20180309-111659_202403866","dateCreated":"2018-03-09T11:16:59+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3216","text":"val windowedCounts = jsonFilteredDf\n            .withWatermark(\"timestamp\",\"1 minutes\")\n            .groupBy(\n                 window($\"timestamp\", \"15 seconds\", \"15 seconds\"),\n                $\"topic\")\n            .count()\n","dateUpdated":"2018-03-09T11:45:20+0000","dateFinished":"2018-03-09T11:45:20+0000","dateStarted":"2018-03-09T11:45:20+0000","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"windowedCounts: org.apache.spark.sql.DataFrame = [window: struct<start: timestamp, end: timestamp>, topic: string ... 1 more field]\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520593435380_492101466","id":"20180309-110355_1820540450","dateCreated":"2018-03-09T11:03:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2139","text":"import org.apache.spark.sql.streaming.{OutputMode, Trigger}\nimport scala.concurrent.duration._\nval q = windowedCounts.writeStream\n    .format(\"memory\")\n    .queryName(\"sensor\")\n    .start()","dateUpdated":"2018-03-09T11:45:22+0000","dateFinished":"2018-03-09T11:45:22+0000","dateStarted":"2018-03-09T11:45:22+0000","title":"write to memory","results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import org.apache.spark.sql.streaming.{OutputMode, Trigger}\nimport scala.concurrent.duration._\nq: org.apache.spark.sql.streaming.StreamingQuery = org.apache.spark.sql.execution.streaming.StreamingQueryWrapper@c2a2783\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520594273241_-1674011295","id":"20180309-111753_233285208","dateCreated":"2018-03-09T11:17:53+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:3311","text":"q.stop","dateUpdated":"2018-03-09T11:44:09+0000","dateFinished":"2018-03-09T11:44:09+0000","dateStarted":"2018-03-09T11:44:09+0000","title":"Stopping Query","results":{"code":"SUCCESS","msg":[]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sql","editOnDblClick":false},"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520593743674_1691821344","id":"20180309-110903_1604058940","dateCreated":"2018-03-09T11:09:03+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2274","text":"%sql\nselect * from sensor\n","dateUpdated":"2018-03-09T11:46:36+0000","dateFinished":"2018-03-09T11:46:36+0000","dateStarted":"2018-03-09T11:46:36+0000","results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"window\ttopic\tcount\n"}]}},{"user":"anonymous","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1520593814158_1985643622","id":"20180309-111014_29750768","dateCreated":"2018-03-09T11:10:14+0000","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2683"}],"name":"KafkaSparkStreaming","id":"2D7BNDEEA","angularObjects":{"2D8X46C4X:shared_process":[],"2DB45KCC4:shared_process":[],"2D95YRNEM:shared_process":[],"2D9S8W9V3:shared_process":[],"2D8CV7ND8:shared_process":[],"2DAXE1NS9:shared_process":[],"2DAGB8Z4Y:shared_process":[],"2D792H82Z:shared_process":[],"2D8C6C5A1:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}